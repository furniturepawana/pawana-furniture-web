<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %> | Luxury Furniture Studio</title>

    <!-- Google Fonts: Playfair Display + Lato -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/main.css" />
  </head>

  <body class="<%= typeof pageClass !== 'undefined' ? pageClass : '' %>">
    <!-- Header -->
    <header class="site-header">
      <a class="logo" href="/">Pawana<span>Furniture</span></a>
      <nav class="nav-links">
      <a href="/about">About Pawana</a>
      <div class="dropdown">
        <a href="/catalogue">Collection</a>
        <div class="dropdown-content collections-dropdown">
          <!-- Section 1: Items (By Type) -->
          <div class="dropdown-section">
            <h4>Items</h4>
            <div class="dropdown-list">
              <p><a href="/catalogue?view=items&type=sofa">Sofa</a></p>
              <p><a href="/catalogue?view=items&type=chair">Chair</a></p>
              <p><a href="/catalogue?view=items&type=table">Table</a></p>
              <p><a href="/catalogue?view=items&type=bed">Bed</a></p>
              <p><a href="/catalogue?view=items&type=cabinet">Cabinet</a></p>
              <p><a href="/catalogue?view=items&type=console">Console</a></p>
            </div>
          </div>

          <!-- Section 2: Sets (By Room) -->
          <div class="dropdown-section">
            <h4>Sets</h4>
            <div class="dropdown-list">
              <p><a href="/catalogue?view=sets&room=Living Room">Living Room Set</a></p>
              <p><a href="/catalogue?view=sets&room=Dining Room">Dining Set</a></p>
              <p><a href="/catalogue?view=sets&room=Bedroom">Bedroom Set</a></p>
              <p><a href="/catalogue?view=sets&room=Office">Office Set</a></p>
              <p><a href="/catalogue?view=sets&room=Showpieces">Showpieces Set</a></p>
            </div>
          </div>

          <!-- Section 3: Rooms -->
          <div class="dropdown-section">
            <h4>Rooms</h4>
            <div class="dropdown-list">
              <% if (navRooms && navRooms.length > 0) { %>
                <% navRooms.forEach(room => { %>
                  <p><a href="/room/<%= room.slug %>"><%= room.name %></a></p>
                <% }); %>
              <% } else { %>
                <p><a href="/catalogue">View All Rooms</a></p>
              <% } %>
            </div>
          </div>
        </div>
      </div>
           <a href="/services">Services</a>
           <a href="/contact">Contact</a>
       </nav>
    </header>

    <!-- Main Content -->
    <main>
      <%- body %>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
      <p>Â© <%= new Date().getFullYear() %> Pawana Furniture. All rights reserved.</p>
    </footer>

    <script src="/js/index.js"></script>

    <!-- Scroll Animations -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Header Scroll Effect - Transparent to Solid
        const header = document.querySelector('.site-header');

        if (header) {
          window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
              header.classList.add('scrolled');
            } else {
              header.classList.remove('scrolled');
            }
          });
        }

        // Intersection Observer for fade-in animations
        const observerOptions = {
          root: null,
          rootMargin: '0px',
          threshold: 0.1
        };

        const observer = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              observer.unobserve(entry.target); // Only animate once
            }
          });
        }, observerOptions);

        // Observe all fade-in sections
        const fadeElements = document.querySelectorAll('.fade-in-section');
        fadeElements.forEach(el => observer.observe(el));
      });
    </script>
  </body>
</html>
