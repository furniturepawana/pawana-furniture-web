<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %> | Luxury Furniture Studio</title>

    <!-- Google Fonts: Playfair Display + Lato -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/css/main.css" />
  </head>

  <body class="<%= typeof pageClass !== 'undefined' ? pageClass : '' %>">
    <!-- Header -->
    <header class="site-header">
      <a class="logo" href="/">
        <img src="https://res.cloudinary.com/dwa2d4onb/image/upload/v1763917320/pf_icon_rxglcl.png" alt="Pawana Furniture Logo" class="logo-image">
        <span class="logo-text">Pawana<span class="logo-text-light">Furniture</span></span>
      </a>
      <nav class="nav-links">
      <a href="/about">About Pawana</a>
      <div class="dropdown">
        <a href="/catalogue">Collection</a>
        <div class="dropdown-content collections-dropdown">
          <div class="dropdown-list">
            <% if (typeof navRooms !== 'undefined' && navRooms.length > 0) { %>
              <% navRooms.forEach(room => { %>
                <div class="dropdown-item">
                  <a href="/room/<%= room.slug %>">
                    <%= room.name %>
                    <% if (room.types && room.types.length > 0) { %>
                      <span class="arrow">›</span>
                    <% } %>
                  </a>
                  <% if (room.types && room.types.length > 0) { %>
                    <div class="sub-dropdown">
                      <% room.types.forEach(type => { %>
                        <a href="/room/<%= room.slug %>/<%= type.toLowerCase() %>"><%= type %></a>
                      <% }); %>
                      <a href="/room/<%= room.slug %>" style="font-weight: 600; margin-top: 5px; border-top: 1px solid rgba(0,0,0,0.05);">View All <%= room.name %></a>
                    </div>
                  <% } %>
                </div>
              <% }); %>
            <% } else { %>
              <!-- Fallback if navRooms is missing -->
              <div class="dropdown-item">
                <a href="/room/living-room">Living Room <span class="arrow">›</span></a>
                <div class="sub-dropdown">
                  <a href="/room/living-room/sofa">Sofas</a>
                  <a href="/room/living-room/chair">Chairs</a>
                  <a href="/room/living-room/table">Tables</a>
                </div>
              </div>
              <div class="dropdown-item">
                <a href="/room/bedroom">Bedroom <span class="arrow">›</span></a>
                <div class="sub-dropdown">
                  <a href="/room/bedroom/bed">Beds</a>
                  <a href="/room/bedroom/cabinet">Wardrobes</a>
                </div>
              </div>
              <div class="dropdown-item">
                <a href="/room/dining-room">Dining Room <span class="arrow">›</span></a>
                <div class="sub-dropdown">
                  <a href="/room/dining-room/table">Dining Tables</a>
                  <a href="/room/dining-room/chair">Dining Chairs</a>
                </div>
              </div>
            <% } %>
          </div>
        </div>
      </div>
           <a href="/services">Services</a>
           <a href="/contact">Contact</a>
       </nav>
    </header>

    <!-- Main Content -->
    <main>
      <%- body %>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
      <p>© <%= new Date().getFullYear() %> Pawana Furniture. All rights reserved.</p>
    </footer>

    <script src="/js/index.js"></script>
    <script src="/js/dropdown.js"></script>

    <!-- Scroll Animations -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Header Scroll Effect - Transparent to Solid
        const header = document.querySelector('.site-header');

        if (header) {
          window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
              header.classList.add('scrolled');
            } else {
              header.classList.remove('scrolled');
            }
          });
        }

        // Intersection Observer for fade-in animations
        const observerOptions = {
          root: null,
          rootMargin: '0px',
          threshold: 0.1
        };

        const observer = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              observer.unobserve(entry.target); // Only animate once
            }
          });
        }, observerOptions);

        // Observe all fade-in sections
        const fadeElements = document.querySelectorAll('.fade-in-section');
        fadeElements.forEach(el => observer.observe(el));
      });
    </script>
  </body>
</html>
